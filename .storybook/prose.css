/**
 * Storybook ドキュメント用タイポグラフィ
 *
 * Dayopt デザイントークン準拠:
 * - カラー: var(--foreground), var(--border), var(--container), var(--primary)
 * - スペーシング: var(--spacing-xs) ~ var(--spacing-2xl) (8pxグリッド)
 * - 角丸: var(--radius-sm), var(--radius-md)
 * - フォントサイズ: Tailwindデフォルトスケール (text-xs ~ text-2xl)
 * - フォントウェイト: 400 (normal) / 700 (bold)
 * - 行間: 1.25 (tight) / 1.5 (normal) / 1.625 (relaxed)
 *
 * .sb-docs-prose でスコープし @tailwindcss/typography の .prose と衝突回避。
 * ダークモードは CSS変数 (:root / .dark) の自動切替で対応。
 *
 * @see src/styles/globals.css
 * @see src/stories/tokens/Typography.stories.tsx
 */

/* ============================================
 * ベーススタイル
 * ============================================ */
.sb-docs-prose {
  max-width: 64rem; /* 1024px — Storybook標準に近い幅 */
  margin-left: auto;
  margin-right: auto;
  padding: 0;
  color: var(--foreground);
  font-weight: 400; /* font-normal */
  font-size: 1rem; /* text-base (16px) */
  line-height: 1.375; /* leading-snug — 本文の行間を詰める */
  letter-spacing: 0.01em;
  overflow-wrap: anywhere;
  line-break: strict;
}

/* ============================================
 * 見出し — Typography トークン準拠
 *
 * ページタイトル: text-2xl font-bold
 * セクション見出し: text-lg font-bold
 * カード見出し: font-bold (text-base)
 * ============================================ */
.sb-docs-prose > h1 {
  margin-top: 0;
  margin-bottom: var(--spacing-md); /* 24px — mb-6 */
  font-weight: 700; /* font-bold */
  font-size: 1.5rem; /* text-2xl (24px) */
  line-height: 1.25; /* leading-tight */
}

.sb-docs-prose > h2 {
  margin-top: var(--spacing-lg); /* 32px — gap-8 セクション間 */
  margin-bottom: var(--spacing-xs); /* 8px — mb-2 */
  font-weight: 700;
  font-size: 1.125rem; /* text-lg (18px) */
  line-height: 1.5;
}

.sb-docs-prose > h3 {
  margin-top: var(--spacing-md); /* 24px — gap-6 */
  margin-bottom: var(--spacing-xs); /* 8px */
  font-weight: 700;
  font-size: 1rem; /* text-base (16px) */
  line-height: 1.5;
}

.sb-docs-prose > h4 {
  margin-top: var(--spacing-sm); /* 16px — gap-4 */
  margin-bottom: var(--spacing-xs); /* 8px */
  font-weight: 700;
  font-size: 0.875rem; /* text-sm (14px) */
  line-height: 1.5;
}

/* ============================================
 * 段落
 * ============================================ */
.sb-docs-prose > p,
.sb-docs-prose > :is(blockquote, ol, ul, dl, table, details) p {
  margin-top: 0;
  margin-bottom: var(--spacing-xs); /* 8px */
}

/* ============================================
 * リスト
 * ============================================ */
.sb-docs-prose > ul,
.sb-docs-prose > ol,
.sb-docs-prose > :is(blockquote, ol, ul, dl, table, details) ul,
.sb-docs-prose > :is(blockquote, ol, ul, dl, table, details) ol {
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-sm);
  padding-left: var(--spacing-lg); /* 32px */
}

.sb-docs-prose > ul,
.sb-docs-prose > :is(blockquote, ol, dl, table, details) ul {
  list-style-type: disc;
}

.sb-docs-prose > ul ul {
  list-style-type: circle;
}

.sb-docs-prose > ol,
.sb-docs-prose > :is(blockquote, ul, dl, table, details) ol {
  list-style-type: decimal;
}

.sb-docs-prose > :is(blockquote, ol, ul, dl, table, details) li + li {
  margin-top: var(--spacing-xs); /* 8px */
}

/* ============================================
 * 引用
 * ============================================ */
.sb-docs-prose > blockquote {
  margin-top: var(--spacing-sm);
  margin-right: 0;
  margin-bottom: var(--spacing-md);
  margin-left: 0;
  border-left: 4px solid var(--primary);
  padding: var(--spacing-xs) var(--spacing-sm);
  color: var(--muted-foreground);
}

.sb-docs-prose > blockquote > *:first-child {
  margin-top: 0;
}

.sb-docs-prose > blockquote > *:last-child {
  margin-bottom: 0;
}

/* ============================================
 * テーブル — セマンティックトークン
 * ============================================ */
.sb-docs-prose > table {
  margin-top: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
  box-sizing: border-box;
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem; /* text-sm (14px) */
  line-height: 1.5;
}

.sb-docs-prose > table thead {
  background-color: var(--container);
}

.sb-docs-prose > table th {
  border-bottom: 1px solid var(--foreground);
  padding: 0.75rem var(--spacing-xs);
  vertical-align: baseline;
  text-align: left;
  font-weight: 700;
}

.sb-docs-prose > table td {
  border-bottom: 1px solid var(--border);
  padding: 0.75rem var(--spacing-xs);
  vertical-align: baseline;
  text-align: left;
}

.sb-docs-prose > table th[align='center'],
.sb-docs-prose > table td[align='center'] {
  text-align: center;
}

.sb-docs-prose > table th[align='right'],
.sb-docs-prose > table td[align='right'] {
  text-align: right;
}

/* ============================================
 * 水平線
 * ============================================ */
.sb-docs-prose > hr {
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  border: 0;
  border-top: 1px solid var(--border);
  opacity: 1;
}

/* ============================================
 * コードブロック
 * ============================================ */
.sb-docs-prose > pre {
  margin-top: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
  overflow-x: auto;
  background-color: var(--container);
  border: 1px solid var(--border);
  border-radius: var(--radius-md); /* 8px */
  padding: 0.75rem var(--spacing-sm);
  font-size: 0.875rem; /* text-sm (14px) */
  line-height: 1.5;
}

.sb-docs-prose > pre code {
  display: block;
  background: transparent;
  padding: 0;
  border: none;
  font-size: inherit;
}

/* ============================================
 * インラインコード
 * ============================================ */
.sb-docs-prose code {
  background-color: var(--container);
  border-radius: var(--radius-sm); /* 4px */
  padding: 0.125rem 0.375rem;
  font-size: 0.875em;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;
}

/* ============================================
 * リンク
 * ============================================ */
.sb-docs-prose .sbdocs-a:any-link {
  color: var(--primary);
  font-family: inherit;
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
}

@media (hover: hover) {
  .sb-docs-prose .sbdocs-a:hover {
    text-decoration-thickness: 2px;
  }
}

.sb-docs-prose .sbdocs-a:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* ============================================
 * 定義リスト
 * ============================================ */
.sb-docs-prose > dl {
  margin-top: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
}

.sb-docs-prose > dl dt {
  font-weight: 700;
  margin-top: var(--spacing-sm);
}

.sb-docs-prose > dl dd {
  margin-left: var(--spacing-lg);
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-xs);
}

/* ============================================
 * Details / Summary
 * ============================================ */
.sb-docs-prose > details {
  margin-top: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm);
}

.sb-docs-prose > details > summary {
  cursor: default;
  font-weight: 700;
}

.sb-docs-prose > details[open] > summary {
  margin-bottom: var(--spacing-sm);
}

/* ============================================
 * Storybook 固有オーバーライド
 * ============================================ */

/* Storybookが生成するコードブロックラッパー */
.sb-docs-prose > pre:has(.docblock-source) {
  overflow: visible;
  background-color: transparent;
  border-radius: 0;
  border: 0;
  padding: 0;
  color: currentcolor;
}

/* Storybookコードブロックとソースコード表示 */
.sb-docs-prose .docs-story + div,
.sb-docs-prose .docblock-source {
  font-size: 0.875rem; /* text-sm */
  line-height: 1.5;
}

/* ドキュメント内の各Storyの見出し */
.sb-docs-prose .sb-anchor > h3 {
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-sm);
  font-weight: 700;
  font-size: 1.125rem; /* text-lg (18px) */
  line-height: 1.5;
}

/* Story見出し後の説明文 */
.sb-docs-prose .sb-anchor > h3 + div > p {
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-sm);
}

/* Controls（ArgsTable）を全幅に */
.sb-docs-prose .docblock-argstable {
  max-width: none !important;
}

/* Docs内のStoryプレビューにCanvas風の余白 */
.sb-docs-prose .docs-story {
  padding: var(--spacing-sm) !important; /* 16px — Canvas と同じ */
}

/* Storybook inline code リセット（emotion CSSとの衝突回避） */
.sb-docs-prose code[class^='css-'] {
  border: 0;
  background-color: transparent;
  padding: 0;
  color: inherit;
  font: inherit;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;
  letter-spacing: 0;
}

/* ============================================
 * レスポンシブ調整
 * ============================================ */
@media (min-width: 48rem) {
  .sb-docs-prose {
    padding: 0;
  }

  .sb-docs-prose > h1 {
    margin-bottom: var(--spacing-xl); /* 48px — デスクトップではゆったり */
    font-size: 1.875rem; /* text-3xl (30px) */
    line-height: 1.25;
  }

  .sb-docs-prose > h2 {
    margin-top: var(--spacing-xl); /* 48px — デスクトップではゆったり */
    font-size: 1.25rem; /* text-xl (20px) */
  }

  .sb-docs-prose > h3 {
    margin-top: var(--spacing-lg); /* 32px — デスクトップではゆったり */
    margin-bottom: var(--spacing-sm);
    font-size: 1.125rem; /* text-lg (18px) */
  }

  .sb-docs-prose > table {
    font-size: 1rem; /* text-base */
  }

  .sb-docs-prose > table th,
  .sb-docs-prose > table td {
    padding: 1rem var(--spacing-sm);
  }
}
