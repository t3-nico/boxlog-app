<!--
  Storybook Preview Head
  next/font が使えない環境のため、Google Fonts から直接読み込み。
  globals.css の body { font-family: var(--font-inter), var(--font-noto-jp), ... } が
  Storybook環境でも正しく動作するようCSS変数を定義。
-->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,100..900&family=Noto+Sans+JP:wght@100..900&display=swap"
  rel="stylesheet"
/>
<style>
  :root {
    --font-inter: 'Inter', sans-serif;
    --font-noto-jp: 'Noto Sans JP', sans-serif;
  }

  /* ============================================
   * Docs Wrapper リセット
   *
   * Storybook内部の DocsWrapper / DocsContent が
   * padding: 4rem 20px / max-width: 1000px を適用する。
   * .sb-docs-prose に集約するため外側をリセット。
   * ============================================ */
  .sbdocs.sbdocs-wrapper {
    padding: 0 !important;
    margin: var(--spacing-lg) !important; /* 32px */
  }
  .sbdocs.sbdocs-content {
    max-width: none !important;
  }

  /* ============================================
   * Story Canvas: コンポーネントプレビュー領域
   *
   * background ショートハンドで backgrounds addon の
   * background-image（グリッド）もリセット。
   * ============================================ */
  .docs-story {
    background: var(--background) !important;
    color: var(--foreground) !important;
  }

  /* Canvas tab（個別Story表示時） */
  .sb-show-main {
    background: var(--background) !important;
    color: var(--foreground) !important;
    padding: var(--spacing-sm) !important; /* 16px */
  }

  /* Docs tab では外側余白を除去 */
  .sb-show-main:has(.sbdocs-wrapper) {
    padding: 0 !important;
  }

  /* ストーリーキャンバスのボーダー */
  .sbdocs-preview {
    border: 1px solid var(--border) !important;
    border-radius: var(--radius-md) !important;
  }
  /* ストーリープレビュー ツールバー・アクションバー */
  .dark .sbdocs-preview {
    background: var(--background) !important;
  }
  .dark .sbdocs-preview > [class*="css-"] {
    background: var(--background) !important;
    border-color: var(--border) !important;
  }
  .dark .sbdocs-preview button[class*="css-"] {
    color: var(--muted-foreground) !important;
  }

  /* ArgsテーブルのフォーカスCSS */
  .docblock-argstable :focus:focus {
    outline: 2px solid var(--primary) !important;
    outline-offset: 2px !important;
  }

  /* ============================================
   * Dark Mode: Docs Chrome 全体反転
   *
   * DocsContainer は emotion CSS-in-JS でライトテーマの
   * hex値を全要素にインライン適用する。
   * MDX ページ（Colors, Elevation 等）と Autodocs ページ
   * 両方の要素を .dark 時に CSS変数で一括上書きする。
   *
   * .sb-docs-prose 内のコンテンツは prose.css が
   * CSS変数ベースで処理するため自動的にダーク対応。
   * ============================================ */

  /* --- Docs ページ全体の背景 ---
   * Storybook v10: .sbdocs が付かないケース（standalone MDX）があるため
   * .sbdocs-wrapper, .sbdocs-content もフォールバックとして指定。
   */
  html.dark .sbdocs,
  html.dark .sbdocs-wrapper,
  html.dark .sbdocs-content {
    background: var(--background) !important;
    color: var(--foreground) !important;
  }

  /* --- emotion CSS テキスト色の一括上書き ---
   * MDX/Autodocs の見出し・段落・リスト等、emotion CSS が
   * color を直接指定する全要素を foreground に統一する。
   */
  html.dark .sbdocs [class*="css-"],
  html.dark .sbdocs-wrapper [class*="css-"],
  html.dark .sbdocs-content [class*="css-"] {
    color: var(--foreground) !important;
  }

  /* --- リンク --- */
  html.dark .sbdocs a[class*="css-"],
  html.dark .sbdocs-wrapper a[class*="css-"],
  html.dark .sbdocs-content a[class*="css-"] {
    color: var(--primary) !important;
  }

  /* --- テーブル（MDX & ArgsTable 共通） --- */
  html.dark .sbdocs thead,
  html.dark .sbdocs-content thead,
  html.dark .docblock-argstable-head {
    background: var(--container) !important;
  }
  html.dark .sbdocs th,
  html.dark .sbdocs-content th {
    color: var(--foreground) !important;
    border-color: var(--foreground) !important;
  }
  html.dark .sbdocs tbody,
  html.dark .sbdocs tbody tr,
  html.dark .sbdocs td,
  html.dark .sbdocs-content tbody,
  html.dark .sbdocs-content tbody tr,
  html.dark .sbdocs-content td {
    color: var(--foreground) !important;
    border-color: var(--border) !important;
    background: var(--background) !important;
  }

  /* --- 水平線 --- */
  html.dark .sbdocs hr[class*="css-"],
  html.dark .sbdocs-content hr[class*="css-"] {
    border-color: var(--border) !important;
  }

  /* --- インラインコード --- */
  html.dark .sbdocs :not(pre) > code,
  html.dark .sbdocs-content :not(pre) > code {
    background: var(--container) !important;
  }

  /* --- コードブロック（MDX直接記述） --- */
  html.dark .sbdocs-content pre[class*="css-"] {
    background: var(--container) !important;
    border-color: var(--border) !important;
  }

  /* --- Controls (ArgsTable) --- */
  .dark .docblock-argstable-body,
  .dark .sbdocs [class*="docblock-argstable"] {
    background: var(--background) !important;
  }
  /*
   * Controls 入力要素
   * emotion CSS が preview-head.html より後に読み込まれるため、
   * html.dark で特異度を上げて確実に上書きする。
   * .docblock-argstable を直接使い、.sbdocs 経由の深いパスに依存しない。
   */
  html.dark .docblock-argstable input,
  html.dark .docblock-argstable textarea,
  html.dark .docblock-argstable select {
    color: var(--foreground) !important;
    background-color: var(--container) !important;
    border-color: var(--border) !important;
  }
  html.dark .docblock-argstable button {
    color: var(--muted-foreground) !important;
    background-color: var(--container) !important;
    border-color: var(--border) !important;
  }
  /* ArgsTable 型バッジ等 */
  html.dark .docblock-argstable td span[class*="css-"] {
    color: var(--muted-foreground) !important;
  }

  /* --- Story 見出し（.sb-anchor）とセクション見出し --- */
  html.dark .sb-anchor,
  html.dark .sb-heading {
    color: var(--foreground) !important;
  }
  /* sb-anchor 内のリンクは foreground（primary ではなく） */
  html.dark .sbdocs .sb-anchor a,
  html.dark .sbdocs-content .sb-anchor a {
    color: var(--foreground) !important;
  }

  /* --- ソースコード表示 --- */
  html.dark .docblock-source {
    background: var(--container) !important;
    border-color: var(--border) !important;
    color: var(--foreground) !important;
  }
  /* ソースコード内のCopy等ボタン */
  html.dark .docblock-source button {
    color: var(--muted-foreground) !important;
  }

  /* --- "Show code" トグルボタン --- */
  html.dark .docblock-code-toggle {
    color: var(--muted-foreground) !important;
    background-color: var(--background) !important;
    border-color: var(--border) !important;
  }
</style>
<script>
  document.documentElement.setAttribute('lang', 'ja');
</script>
