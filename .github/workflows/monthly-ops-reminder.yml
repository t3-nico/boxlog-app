name: ğŸ“… Monthly Operations Reminder

on:
  schedule:
    # æ¯æœˆ1æ—¥ã®æœ9æ™‚ï¼ˆJSTï¼‰ã«å®Ÿè¡Œ
    - cron: '0 0 1 * *'
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

permissions:
  issues: write

jobs:
  create-gameday-issue:
    name: ğŸ® GameDay Reminder
    runs-on: ubuntu-latest
    steps:
      - name: Create GameDay Issue
        uses: actions/github-script@60a0d83039c74a4aee543508d2ffcb1c3799cdea # v7.0.1
        with:
          script: |
            const today = new Date();
            const month = today.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long' });

            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ğŸ® ${month} GameDay å®Ÿæ–½`,
              body: `## æœˆæ¬¡éšœå®³è¨“ç·´ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

            ä»Šæœˆã®GameDayï¼ˆéšœå®³è¨“ç·´ï¼‰ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚

            ### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

            - [ ] ã‚·ãƒŠãƒªã‚ªé¸æŠï¼ˆ[GAMEDAY.md](docs/operations/GAMEDAY.md) å‚ç…§ï¼‰
            - [ ] Stagingç’°å¢ƒã§è¨“ç·´å®Ÿæ–½
            - [ ] æŒ¯ã‚Šè¿”ã‚Šã‚’ã“ã®Issueã«ã‚³ãƒ¡ãƒ³ãƒˆ
            - [ ] Runbookæ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

            ### ã‚·ãƒŠãƒªã‚ªå€™è£œ

            1. **APIéšœå®³**ï¼ˆé›£æ˜“åº¦: æ˜“ï¼‰- åˆå›æ¨å¥¨
            2. **èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹éšœå®³**ï¼ˆé›£æ˜“åº¦: ä¸­ï¼‰
            3. **ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—**ï¼ˆé›£æ˜“åº¦: ä¸­ï¼‰
            4. **å¤§é‡ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯**ï¼ˆé›£æ˜“åº¦: é›£ï¼‰

            ### å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

            - [GAMEDAY.md](docs/operations/GAMEDAY.md)
            - [RUNBOOK.md](docs/operations/RUNBOOK.md)

            ---
            ğŸ¤– ã“ã®Issueã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ`,
              labels: ['operations', 'gameday']
            });

  create-slo-review-issue:
    name: ğŸ“Š SLO Review Reminder
    runs-on: ubuntu-latest
    steps:
      - name: Create SLO Review Issue
        uses: actions/github-script@60a0d83039c74a4aee543508d2ffcb1c3799cdea # v7.0.1
        with:
          script: |
            const today = new Date();
            const month = today.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long' });

            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ğŸ“Š ${month} SLO/SLI ãƒ¬ãƒ“ãƒ¥ãƒ¼`,
              body: `## æœˆæ¬¡SLOãƒ¬ãƒ“ãƒ¥ãƒ¼

            å…ˆæœˆã®SLOé”æˆçŠ¶æ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

            ### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

            - [ ] Sentry Performance ç¢ºèªï¼ˆp50/p95ï¼‰
            - [ ] Sentry Error Rate ç¢ºèª
            - [ ] Vercel Analytics ç¢ºèªï¼ˆWeb Vitalsï¼‰
            - [ ] ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆæ¶ˆè²»ç‡ã‚’è¨˜éŒ²

            ### ç¢ºèªé …ç›®

            | æŒ‡æ¨™ | SLO | å®Ÿç¸¾ | é”æˆ |
            |------|-----|------|------|
            | APIå¯ç”¨æ€§ | 99.5% | ___% | â¬œ |
            | API p95 | < 500ms | ___ms | â¬œ |
            | LCP | < 2.5s | ___s | â¬œ |
            | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ç‡ | < 0.1% | ___% | â¬œ |

            ### å‚è€ƒ

            - [Sentry Dashboard](https://sentry.io)
            - [Vercel Analytics](https://vercel.com/analytics)
            - [SLO_SLI.md](docs/operations/SLO_SLI.md)

            ---
            ğŸ¤– ã“ã®Issueã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ`,
              labels: ['operations', 'slo-review']
            });
