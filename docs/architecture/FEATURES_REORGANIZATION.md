# Features å†ç·¨æˆè¨ˆç”»

## ğŸ“Š ç¾çŠ¶åˆ†æï¼ˆ2025-10-27ï¼‰

### å…¨Featuresãƒªã‚¹ãƒˆï¼ˆ21å€‹ï¼‰

```
src/features/
â”œâ”€â”€ aichat/           âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ auth/             âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ board/            ğŸ”„ çµ±åˆå¯¾è±¡
â”œâ”€â”€ calendar/         ğŸ”„ çµ±åˆå¯¾è±¡
â”œâ”€â”€ command-palette/  âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ events/           ğŸ”„ çµ±åˆå¯¾è±¡
â”œâ”€â”€ help/             âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ i18n/             âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ inspector/        âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ navigation/       âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ notifications/    âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ offline/          âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ search/           âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ settings/         âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ smart-folders/    âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ stats/            âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ table/            ğŸ”„ çµ±åˆå¯¾è±¡
â”œâ”€â”€ tags/             âœ… ãã®ã¾ã¾ç¶­æŒ
â”œâ”€â”€ tasks/            âš ï¸ å‰Šé™¤äºˆå®šï¼ˆsessionsã«çµ±åˆï¼‰
â”œâ”€â”€ plans/          ğŸ†• æ–°è¦å®Ÿè£…æ¸ˆã¿ï¼ˆPhase 3å®Œäº†ï¼‰
â””â”€â”€ trash/            âœ… ãã®ã¾ã¾ç¶­æŒ
```

---

## ğŸ¯ æ–°ã—ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Planï¼ˆä½œæ¥­å˜ä½ï¼‰              â”‚
â”‚  - ID, ã‚¿ã‚¤ãƒˆãƒ«, èª¬æ˜                    â”‚
â”‚  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹, å„ªå…ˆåº¦                    â”‚
â”‚  - é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»                        â”‚
â”‚  - ã‚¿ã‚°ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚        â”‚        â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
  â”‚Calendarâ”‚â”‚ Board  â”‚â”‚ Table â”‚
  â”‚       â”‚â”‚        â”‚â”‚       â”‚
  â”‚æ™‚é–“è»¸  â”‚â”‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹â”‚â”‚ä¸€è¦§   â”‚
  â”‚ã§è¡¨ç¤º  â”‚â”‚åˆ¥ã§è¡¨ç¤ºâ”‚â”‚ã§è¡¨ç¤º  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆãƒ“ãƒ¥ãƒ¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Plans Data                 â”‚
â”‚  (ã‚¿ã‚°æƒ…å ±ã‚’å«ã‚€)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚        â”‚        â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
  â”‚Calendarâ”‚â”‚ Board  â”‚â”‚ Table â”‚
  â”‚       â”‚â”‚        â”‚â”‚       â”‚
  â”‚æ™‚é–“è»¸  â”‚â”‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹â”‚â”‚ä¸€è¦§   â”‚
  â”‚ã§è¡¨ç¤º  â”‚â”‚åˆ¥ã§è¡¨ç¤ºâ”‚â”‚ã§è¡¨ç¤º  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ çµ±åˆãƒ»ç§»è¡Œè¨ˆç”»

### Phase 1: ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰

#### **`tasks` / `events` â†’ `plans`** ã¸ã®ç§»è¡Œ

**ç¾çŠ¶**: tasks, events ã¯å‰Šé™¤æ¸ˆã¿

**ç§»è¡Œå¾Œã®`plans`**:

```typescript
// src/features/plans/types/plan.ts
Plan {
  id: string
  user_id: string
  plan_number: string      // è‡ªå‹•æ¡ç•ª
  title: string
  description?: string
  status: PlanStatus       // backlog|ready|active|wait|done|cancel
  priority?: PlanPriority  // urgent|high|normal|low
  due_date?: string
  start_time?: string      // é–‹å§‹æ™‚åˆ»
  end_time?: string        // çµ‚äº†æ™‚åˆ»
  recurrence_type?: RecurrenceType
  tags: Tag[]              // ã‚¿ã‚°é–¢é€£ä»˜ã‘
  created_at: string
  updated_at: string
}
```

**ç§»è¡Œã‚¹ãƒ†ãƒƒãƒ—**:

1. âœ… `usePlanStore`å®Ÿè£…æ¸ˆã¿ï¼ˆPhase 3å®Œäº†ï¼‰
2. âœ… `usePlans`ãƒ•ãƒƒã‚¯å®Ÿè£…æ¸ˆã¿ï¼ˆPhase 3å®Œäº†ï¼‰
3. âœ… tasks / events å‰Šé™¤æ¸ˆã¿
4. â³ ãƒ“ãƒ¥ãƒ¼çµ±åˆï¼ˆCalendar/Board/Tableã§Plansã‚’è¡¨ç¤ºï¼‰

---

### Phase 2: ãƒ“ãƒ¥ãƒ¼çµ±åˆï¼ˆå„ªå…ˆåº¦ï¼šä¸­ï¼‰

#### 1. **Calendar** - Plansè¡¨ç¤º

```typescript
// src/features/calendar/hooks/useCalendarData.ts
export function useCalendarData() {
  const { data: plans } = usePlans()

  const calendarItems = useMemo(() => {
    return plans?.map((plan) => ({
      id: plan.id,
      title: plan.title,
      start: plan.start_time,
      end: plan.end_time,
      color: getPlanColor(plan.status),
      source: plan,
    })) ?? []
  }, [plans])

  return { calendarItems }
}
```

#### 2. **Board** - Planå˜ä½ã§è¡¨ç¤º

```typescript
// src/features/board/components/PlanCard.tsx
export function PlanCard({ plan }: { plan: Plan }) {
  return (
    <Card>
      <h3>{plan.title}</h3>
      <Badge>{plan.status}</Badge>
      <p>{plan.description}</p>
      {plan.due_date && <p>æœŸé™: {plan.due_date}</p>}
    </Card>
  )
}
```

#### 3. **Table** - Planä¸€è¦§è¡¨ç¤º

```typescript
// src/features/table/components/PlanTable.tsx
export function PlanTable() {
  const { data: plans } = usePlans()

  const columns = [
    { key: 'plan_number', label: 'Plan No.' },
    { key: 'title', label: 'Title' },
    { key: 'status', label: 'Status' },
    { key: 'priority', label: 'Priority' },
    { key: 'due_date', label: 'Due Date' },
  ]

  return <DataTable data={plans} columns={columns} />
}
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆæœ€çµ‚å½¢ï¼‰

```
src/features/
â”œâ”€â”€ plans/             # ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ usePlanStore.ts        âœ… å®Ÿè£…æ¸ˆã¿
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ usePlans.ts            âœ… å®Ÿè£…æ¸ˆã¿
â”‚   â”‚   â””â”€â”€ usePlanTags.ts         âœ… å®Ÿè£…æ¸ˆã¿
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ plan.ts                âœ… å®Ÿè£…æ¸ˆã¿
â”‚   â””â”€â”€ components/                âœ… å®Ÿè£…æ¸ˆã¿
â”‚       â”œâ”€â”€ PlanForm.tsx
â”‚       â”œâ”€â”€ PlanInspector.tsx
â”‚       â””â”€â”€ PlanCard.tsx
â”‚
â”œâ”€â”€ calendar/          # ãƒ“ãƒ¥ãƒ¼ï¼ˆPlansè¡¨ç¤ºï¼‰
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useCalendarData.ts     ğŸ”„ ä¿®æ­£å¿…è¦ï¼ˆPlansçµ±åˆï¼‰
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ CalendarView.tsx       ğŸ”„ ä¿®æ­£å¿…è¦
â”‚
â”œâ”€â”€ board/             # ãƒ“ãƒ¥ãƒ¼ï¼ˆPlanå˜ä½è¡¨ç¤ºï¼‰
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ useKanbanStore.ts      ğŸ”„ ä¿®æ­£å¿…è¦ï¼ˆPlanãƒ™ãƒ¼ã‚¹ã«ï¼‰
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ PlanCard.tsx           ğŸ”„ ä¿®æ­£å¿…è¦
â”‚
â”œâ”€â”€ table/             # ãƒ“ãƒ¥ãƒ¼ï¼ˆPlanä¸€è¦§è¡¨ç¤ºï¼‰
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ PlanTable.tsx          ğŸ”„ ä¿®æ­£å¿…è¦
â”‚
â”œâ”€â”€ events/            # ğŸ—‘ï¸ å‰Šé™¤æ¸ˆã¿
â”‚
â””â”€â”€ tasks/             # ğŸ—‘ï¸ å‰Šé™¤æ¸ˆã¿
```

---

## âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

### å„ªå…ˆåº¦ï¼šé«˜ï¼ˆPhase 4ï¼‰

- [ ] Calendarãƒ“ãƒ¥ãƒ¼çµ±åˆ
  - `useCalendarData`ã§Plansã‚’å–å¾—ãƒ»è¡¨ç¤º
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ã®è‰²åˆ†ã‘
- [ ] Boardãƒ“ãƒ¥ãƒ¼çµ±åˆ
  - Planãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ã®ã‚«ãƒ³ãƒãƒ³è¡¨ç¤º

### å„ªå…ˆåº¦ï¼šä¸­ï¼ˆPhase 5ï¼‰

- [ ] Tableãƒ“ãƒ¥ãƒ¼çµ±åˆ
  - Planä¸€è¦§è¡¨ç¤º
  - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] Inspectorçµ±åˆ
  - PlanInspectorã®å®Œæˆ
  - å…¨ãƒ“ãƒ¥ãƒ¼ã‹ã‚‰ã®Inspectorå‘¼ã³å‡ºã—

### å„ªå…ˆåº¦ï¼šä½ï¼ˆPhase 6ä»¥é™ï¼‰

- [ ] é«˜åº¦ãªæ©Ÿèƒ½
  - ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
  - æ™‚é–“åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
  - ç¹°ã‚Šè¿”ã—Plan

---

## ğŸ“Š ç§»è¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹                               | çŠ¶æ…‹      |
| -------- | ---------------------------------- | --------- |
| Phase 1  | Databaseè¨­è¨ˆãƒ»Migration            | âœ… å®Œäº†   |
| Phase 2  | tRPC API + Zod                     | âœ… å®Œäº†   |
| Phase 3  | Zustand Store + Hooks              | âœ… å®Œäº†   |
| Phase 4  | ãƒ“ãƒ¥ãƒ¼çµ±åˆï¼ˆCalendar/Board/Tableï¼‰ | â³ TODO   |
| Phase 5  | Inspectorçµ±åˆãƒ»UIå®Œæˆ              | â³ TODO   |
| Phase 6  | é«˜åº¦ãªæ©Ÿèƒ½ãƒ»æœ€é©åŒ–                 | â³ TODO   |

---

**æœ€çµ‚æ›´æ–°**: 2025-10-27
**ä½œæˆè€…**: Claude + User
**é–¢é€£Issue**: #620, #621
