# BoxLog SLO/SLI 定義

> Service Level Objectives (SLO) と Service Level Indicators (SLI) の定義

## 概要

BoxLogの信頼性目標を定量的に定義し、継続的な改善を行うための指標です。

## SLI/SLO 一覧

### 1. 可用性 (Availability)

| 指標             | SLI 定義                               | SLO 目標   | 測定方法          |
| ---------------- | -------------------------------------- | ---------- | ----------------- |
| **API可用性**    | 成功レスポンス(2xx,3xx) / 全リクエスト | 99.5% / 月 | Vercel Analytics  |
| **ページ可用性** | 正常表示 / 全ページビュー              | 99.5% / 月 | Sentry Error Rate |

### 2. レイテンシ (Latency)

| 指標                       | SLI 定義                                     | SLO 目標 | 測定方法           |
| -------------------------- | -------------------------------------------- | -------- | ------------------ |
| **API レスポンス (p50)**   | リクエスト〜レスポンス時間の中央値           | < 200ms  | Sentry Performance |
| **API レスポンス (p95)**   | リクエスト〜レスポンス時間の95パーセンタイル | < 500ms  | Sentry Performance |
| **ページ読み込み (LCP)**   | Largest Contentful Paint                     | < 2.5s   | Web Vitals         |
| **インタラクション (INP)** | Interaction to Next Paint                    | < 200ms  | Web Vitals         |

### 3. エラー率 (Error Rate)

| 指標                   | SLI 定義                     | SLO 目標 | 測定方法      |
| ---------------------- | ---------------------------- | -------- | ------------- |
| **クライアントエラー** | 4xx エラー / 全リクエスト    | < 1%     | Vercel/Sentry |
| **サーバーエラー**     | 5xx エラー / 全リクエスト    | < 0.1%   | Vercel/Sentry |
| **JSエラー**           | ユーザーセッションでのJS例外 | < 0.5%   | Sentry        |

### 4. Core Web Vitals

| 指標    | SLI 定義                  | SLO 目標               | 測定方法   |
| ------- | ------------------------- | ---------------------- | ---------- |
| **LCP** | Largest Contentful Paint  | Good (< 2.5s) 75%以上  | Web Vitals |
| **INP** | Interaction to Next Paint | Good (< 200ms) 75%以上 | Web Vitals |
| **CLS** | Cumulative Layout Shift   | Good (< 0.1) 75%以上   | Web Vitals |

## エラーバジェット

各SLOに対してエラーバジェットを設定します。

### 計算方法

```
エラーバジェット = 100% - SLO目標

例: API可用性 SLO 99.5%
→ エラーバジェット = 0.5%
→ 月間許容ダウンタイム ≈ 3.6時間
```

### バジェット消費時のアクション

| 消費率  | ステータス | アクション                     |
| ------- | ---------- | ------------------------------ |
| 0-50%   | 正常       | 通常開発継続                   |
| 50-80%  | 注意       | 新機能開発一時停止、安定化優先 |
| 80-100% | 警告       | 全リソースを信頼性改善に投入   |
| 100%超  | 緊急       | 機能フリーズ、根本原因対応     |

## 監視ダッシュボード

### Sentry

- Error Rate: 日次/週次トレンド
- Performance: p50/p95 レイテンシ
- Web Vitals: LCP/INP/CLS スコア

### Vercel Analytics

- ページビュー/エラー率
- Edge Function レイテンシ
- 地域別パフォーマンス

## レビューサイクル

| 頻度   | 内容                                     |
| ------ | ---------------------------------------- |
| 週次   | SLI メトリクス確認                       |
| 月次   | SLO 達成率レビュー、エラーバジェット確認 |
| 四半期 | SLO 目標値の見直し                       |

## 改訂履歴

| 日付       | バージョン | 変更内容 |
| ---------- | ---------- | -------- |
| 2025-12-26 | v1.0       | 初版作成 |
