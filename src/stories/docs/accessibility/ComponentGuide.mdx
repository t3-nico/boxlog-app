import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/Accessibility/コンポーネントガイド" />

# shadcn/ui コンポーネント別ガイド

shadcn/ui（Radix UI）コンポーネントのa11y対応状況

---

## 基本対応済み（そのまま使用可）

| コンポーネント | a11y対応 |
|---------------|---------|
| Button | disabled, aria-busy対応 |
| Input | aria-invalid対応 |
| Select | キーボード操作完備（矢印キー） |
| Dialog | role, aria-modal, フォーカストラップ |
| AlertDialog | 同上 + role="alertdialog" |
| Popover | Escapeで閉じる |
| Drawer | role="dialog" |
| Tooltip | キーボードフォーカスで表示 |

---

## 追加対応が必要

| コンポーネント | 必要な対応 |
|---------------|-----------|
| Toast (Sonner) | `aria-live="polite"` の確認 |
| カスタムドロップダウン | キーボード操作の実装 |
| Drag & Drop | aria-grabbed, aria-dropeffect |
| カスタムスライダー | aria-valuemin/max/now |

---

## Motion Preference

アニメーションを減らしたいユーザー設定を尊重する。

### useReducedMotion フック

OSの「視覚効果を減らす」設定を検出。

```tsx
import { useReducedMotion } from '@/hooks/useReducedMotion';

function AnimatedComponent() {
  const prefersReducedMotion = useReducedMotion();

  return (
    <div
      className={
        prefersReducedMotion
          ? '' // アニメーションなし
          : 'transition-transform duration-300'
      }
    >
      コンテンツ
    </div>
  );
}
```

### CSS での対応

Tailwind CSS の `motion-reduce:` プレフィックス。

```tsx
// アニメーションを条件付きで適用
<div className="
  transition-transform duration-300
  motion-reduce:transition-none
">
  コンテンツ
</div>

// または motion-safe: で明示的に有効化
<div className="
  motion-safe:transition-transform
  motion-safe:duration-300
">
  コンテンツ
</div>
```

### 対象となるアニメーション

- ページ遷移アニメーション
- ローディングスピナー（回転は維持、パルスは停止）
- ホバー時のスケール変化
- スクロールアニメーション
- 自動再生される装飾アニメーション
