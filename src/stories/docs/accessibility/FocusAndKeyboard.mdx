import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/Accessibility/Focus & Keyboard" />

# フォーカスとキーボード

キーボード操作時のフォーカス状態を明確に表示し、キーボードのみで全機能が使えるようにする

---

## フォーカスリング（MD3スタイル）

```tsx
// 推奨パターン
className="outline-none focus-visible:border-transparent focus-visible:ring-2 focus-visible:ring-ring"

// shadcn/ui では focus-visible:outline-ring/50 も使用
className="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring"
```

---

## aria-disabled 対応

`disabled` 属性の代わりに `aria-disabled` を使う場合のスタイル。

```tsx
// aria-disabled 対応
className="aria-disabled:pointer-events-none aria-disabled:opacity-50"
```

---

## スキップリンク

キーボードユーザーがナビゲーションをスキップしてメインコンテンツに移動できるようにする。

```tsx
// スキップリンク
<a
  href="#main-content"
  className="sr-only focus:not-sr-only ..."
>
  メインコンテンツへスキップ
</a>

// ターゲット
<main id="main-content" role="main">
  ...
</main>
```

> Dayoptでは `src/components/layout/base-layout-content.tsx` で実装済み。

---

## 基本キー

| キー | 用途 |
|------|------|
| `Tab` | 次の要素にフォーカス移動 |
| `Shift + Tab` | 前の要素にフォーカス移動 |
| `Enter` | ボタン/リンクの実行 |
| `Space` | チェックボックス/ボタンの切り替え |
| `Escape` | モーダル/ポップオーバーを閉じる |

---

## 入力中のショートカット無効化

テキスト入力中はグローバルショートカットを無効にする。

```tsx
// ショートカットハンドラ内で入力中かチェック
const isTyping = ['INPUT', 'TEXTAREA'].includes(
  document.activeElement?.tagName || ''
);

if (isTyping) return; // 入力中は何もしない

// ショートカット処理を続行...
```

---

## Dayoptのショートカット例

カレンダー画面のキーボード操作（Google Calendar互換）。

| キー | アクション |
|------|-----------|
| `Escape` | Inspectorを閉じる |
| `Delete / Backspace` | 選択中プランを削除 |
| `C` | 新規プラン作成 |
| `Cmd/Ctrl + C` | コピー |
| `Cmd/Ctrl + V` | ペースト |
