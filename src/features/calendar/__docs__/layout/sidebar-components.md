# ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°ã‚¬ã‚¤ãƒ‰

BoxLogã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•ã€å®Ÿè£…ä¾‹ã‚’è¨˜è¼‰ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°](#ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°)
- [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰](#ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰)
- [å®Ÿè£…ä¾‹](#å®Ÿè£…ä¾‹)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## æ¦‚è¦

ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚’åŠ¹ç‡çš„ã«æ“ä½œã™ã‚‹ãŸã‚ã®çµ±åˆã•ã‚ŒãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»åˆ¶å¾¡ãƒ‘ãƒãƒ«ã§ã™ã€‚

### ğŸ¯ ä¸»è¦æ©Ÿèƒ½

1. **ãƒŸãƒ‹ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼**: æœˆè¡¨ç¤ºã§ã®æ—¥ä»˜é¸æŠ
2. **ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ã‚ˆãä½¿ç”¨ã™ã‚‹æ©Ÿèƒ½ã¸ã®ç´ æ—©ã„ã‚¢ã‚¯ã‚»ã‚¹  
3. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†**: è¤‡æ•°ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ¶å¾¡
4. **ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆçµã‚Šè¾¼ã¿
5. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®æœ€é©åŒ–è¡¨ç¤º

### ğŸ—ï¸ è¨­è¨ˆåŸå‰‡

- **Progressive Disclosure**: å¿…è¦ãªæƒ…å ±ã®ã¿ã‚’æ®µéšçš„ã«è¡¨ç¤º
- **Touch-Friendly**: ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã§ã®æ“ä½œæ€§ã‚’é‡è¦–
- **Accessible**: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å®Œå…¨å¯¾å¿œ
- **Performant**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºãªå‹•ä½œ

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/features/calendar/components/layout/Sidebar/
â”œâ”€â”€ index.ts                 # ğŸ“¦ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçµ±åˆ
â”œâ”€â”€ Sidebar.tsx             # ğŸ›ï¸ ãƒ¡ã‚¤ãƒ³ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ
â”œâ”€â”€ MiniCalendar.tsx        # ğŸ“… ãƒŸãƒ‹ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ QuickActions.tsx        # âš¡ ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‘ãƒãƒ«
â”œâ”€â”€ CalendarList.tsx        # ğŸ“‹ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒªã‚¹ãƒˆç®¡ç†
â”œâ”€â”€ TagFilter.tsx           # ğŸ·ï¸ ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
â””â”€â”€ README.md              # ğŸ“š ã‚µã‚¤ãƒ‰ãƒãƒ¼å°‚ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### ğŸ”„ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢ä¿‚å›³

```mermaid
graph TB
    A[Sidebar] --> B[æŠ˜ã‚ŠãŸãŸã¿åˆ¶å¾¡]
    A --> C[ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†]
    
    C --> D[MiniCalendar]
    C --> E[QuickActions]  
    C --> F[CalendarList]
    C --> G[TagFilter]
    
    B --> H[Full Mode]
    B --> I[Collapsed Mode]
    B --> J[Mobile Hidden]
    
    D --> K[Date Selection]
    D --> L[Event Indicators]
    
    E --> M[Create Actions]
    E --> N[Navigation Actions]
    
    F --> O[Calendar Toggle]
    F --> P[Calendar CRUD]
    
    G --> Q[Tag Selection]
    G --> R[Filter Application]
```

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. ğŸ›ï¸ Sidebar (ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ)

**ãƒ•ã‚¡ã‚¤ãƒ«**: `Sidebar.tsx`  
**å½¹å‰²**: ã‚µã‚¤ãƒ‰ãƒãƒ¼å…¨ä½“ã®çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ¶å¾¡

#### ğŸ“‹ ä¸»è¦æ©Ÿèƒ½

##### è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ç®¡ç†
```typescript
enum SidebarMode {
  FULL = 'full',        // é€šå¸¸è¡¨ç¤º (320px)
  COLLAPSED = 'collapsed', // æŠ˜ã‚ŠãŸãŸã¿ (48px)  
  HIDDEN = 'hidden'     // éè¡¨ç¤º (ãƒ¢ãƒã‚¤ãƒ«)
}
```

##### ã‚»ã‚¯ã‚·ãƒ§ãƒ³å±•é–‹åˆ¶å¾¡
```typescript
interface ExpandedSections {
  'mini-calendar': boolean
  'quick-actions': boolean  
  'calendar-list': boolean
  'tag-filter': boolean
}
```

#### ğŸ”§ Propså®šç¾©

```typescript
interface SidebarProps {
  // åŸºæœ¬åˆ¶å¾¡
  className?: string
  collapsed?: boolean
  onCollapsedChange?: (collapsed: boolean) => void
  
  // MiniCalendar
  selectedDate?: Date
  onDateSelect?: (date: Date) => void
  highlightedDates?: Date[]
  
  // CalendarList  
  calendars?: Calendar[]
  selectedCalendarIds?: string[]
  onCalendarToggle?: (calendarId: string, visible: boolean) => void
  onCalendarCreate?: () => void
  
  // TagFilter
  tags?: TagItem[]
  selectedTagIds?: string[]
  onTagToggle?: (tagId: string, selected: boolean) => void
  
  // QuickActions
  onCreateEvent?: () => void
  onCreateTask?: () => void
  onGoToToday?: () => void
  
  // è¡¨ç¤ºåˆ¶å¾¡
  showMiniCalendar?: boolean
  showCalendarList?: boolean  
  showTagFilter?: boolean
  showQuickActions?: boolean
}
```

#### ğŸ’¡ åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹

```tsx
import { Sidebar } from '@/features/calendar/components/layout/Sidebar'

<Sidebar
  collapsed={false}
  onCollapsedChange={setCollapsed}
  selectedDate={currentDate}
  onDateSelect={handleDateSelect}
  calendars={userCalendars}
  onCreateEvent={handleCreateEvent}
  showMiniCalendar={true}
  showQuickActions={true}
/>
```

---

### 2. ğŸ“… MiniCalendar

**ãƒ•ã‚¡ã‚¤ãƒ«**: `MiniCalendar.tsx`  
**å½¹å‰²**: ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªæœˆè¡¨ç¤ºã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

#### ğŸ“‹ ä¸»è¦æ©Ÿèƒ½

##### æ—¥ä»˜é¸æŠãƒ»è¡¨ç¤º
- **ç¾åœ¨æ—¥ãƒã‚¤ãƒ©ã‚¤ãƒˆ**: ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¦–è¦šçš„ã«å¼·èª¿
- **é¸æŠæ—¥è¡¨ç¤º**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ—¥ä»˜ã®æ˜ç¢ºãªè¡¨ç¤º
- **ã‚¤ãƒ™ãƒ³ãƒˆ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼**: ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹æ—¥ã®è¦–è¦šçš„ãªé€šçŸ¥
- **é€±ç•ªå·è¡¨ç¤º**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ISOé€±ç•ªå·ã‚’è¡¨ç¤º

##### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **æœˆç§»å‹•**: å‰å¾Œã®æœˆã¸ã®ç´ æ—©ã„ç§»å‹•
- **å¹´ç§»å‹•**: å¹´å˜ä½ã§ã®ã‚¸ãƒ£ãƒ³ãƒ—æ©Ÿèƒ½
- **ä»Šæ—¥ã«æˆ»ã‚‹**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç¾åœ¨æ—¥ã«å¾©å¸°

#### ğŸ”§ Propså®šç¾©

```typescript
interface MiniCalendarProps {
  // æ—¥ä»˜åˆ¶å¾¡
  selectedDate?: Date
  onDateSelect?: (date: Date) => void
  highlightedDates?: Date[]
  
  // è¡¨ç¤ºè¨­å®š
  firstDayOfWeek?: 0 | 1 // 0: æ—¥æ›œé–‹å§‹, 1: æœˆæ›œé–‹å§‹
  showWeekNumbers?: boolean
  
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿
  eventDates?: Date[] // ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹æ—¥ä»˜
  
  // ã‚¹ã‚¿ã‚¤ãƒ«
  className?: string
  size?: 'sm' | 'md' | 'lg'
}
```

#### ğŸ’¡ ä½¿ç”¨ä¾‹

```tsx
<MiniCalendar
  selectedDate={selectedDate}
  onDateSelect={(date) => {
    setSelectedDate(date)
    navigateToDate(date)
  }}
  highlightedDates={eventDates}
  firstDayOfWeek={1} // æœˆæ›œé–‹å§‹
  showWeekNumbers={true}
  eventDates={datesWithEvents}
/>
```

#### ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```css
/* ã‚µã‚¤ã‚ºãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ */
.mini-calendar--sm { width: 240px; }
.mini-calendar--md { width: 280px; } /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ */
.mini-calendar--lg { width: 320px; }

/* ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ */
.mini-calendar {
  --today-bg: theme('colors.blue.500');
  --selected-bg: theme('colors.primary.500');
  --event-indicator: theme('colors.green.400');
}
```

---

### 3. âš¡ QuickActions

**ãƒ•ã‚¡ã‚¤ãƒ«**: `QuickActions.tsx`  
**å½¹å‰²**: é »ç¹ã«ä½¿ç”¨ã™ã‚‹æ©Ÿèƒ½ã¸ã®ç´ æ—©ã„ã‚¢ã‚¯ã‚»ã‚¹

#### ğŸ“‹ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¨®é¡

##### ä½œæˆç³»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- **ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ**: æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã®è¿½åŠ 
- **ã‚¿ã‚¹ã‚¯ä½œæˆ**: TODOã‚¿ã‚¹ã‚¯ã®è¿½åŠ   
- **ãƒ­ã‚°ä½œæˆ**: å®Ÿç¸¾è¨˜éŒ²ã®è¿½åŠ 

##### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç³»
- **ä»Šæ—¥ã«ç§»å‹•**: ç¾åœ¨æ—¥ã¸ã®ç¬æ™‚ç§»å‹•
- **è¨­å®šç”»é¢**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨­å®šã®å¤‰æ›´

##### ãƒ‡ãƒ¼ã‚¿æ“ä½œç³»  
- **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ›¸ãå‡ºã—
- **ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**: å¤–éƒ¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®å–ã‚Šè¾¼ã¿
- **åŒæœŸ**: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®åŒæœŸ

#### ğŸ”§ Propså®šç¾©

```typescript
interface QuickActionsProps {
  // ä½œæˆç³»
  onCreateEvent?: () => void
  onCreateTask?: () => void  
  onCreateLog?: () => void
  
  // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç³»
  onGoToToday?: () => void
  onOpenSettings?: () => void
  
  // ãƒ‡ãƒ¼ã‚¿æ“ä½œç³»
  onExport?: () => void
  onImport?: () => void
  onSyncCalendars?: () => void
  
  // è¡¨ç¤ºåˆ¶å¾¡
  variant?: 'expanded' | 'collapsed' | 'mobile'
  showLabels?: boolean
}
```

#### ğŸ’¡ ä½¿ç”¨ä¾‹

```tsx
<QuickActions
  onCreateEvent={() => openModal('event')}
  onCreateTask={() => openModal('task')}
  onGoToToday={() => navigateToToday()}
  onOpenSettings={() => router.push('/settings/calendar')}
  variant="expanded"
  showLabels={true}
/>
```

#### ğŸ¨ è¡¨ç¤ºãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³

##### Expanded Mode (é€šå¸¸è¡¨ç¤º)
```tsx
// ãƒ•ãƒ«ã‚µã‚¤ã‚ºã€ãƒ©ãƒ™ãƒ«ä»˜ããƒœã‚¿ãƒ³
<div className="grid grid-cols-2 gap-2">
  <Button variant="default" size="sm">
    <Plus className="w-4 h-4 mr-2" />
    ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
  </Button>
</div>
```

##### Collapsed Mode (æŠ˜ã‚ŠãŸãŸã¿)
```tsx  
// ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ã€ç¸¦ä¸¦ã³
<div className="flex flex-col gap-1">
  <Button variant="ghost" size="sm" className="p-2">
    <Plus className="w-4 h-4" />
  </Button>
</div>
```

---

### 4. ğŸ“‹ CalendarList

**ãƒ•ã‚¡ã‚¤ãƒ«**: `CalendarList.tsx`  
**å½¹å‰²**: è¤‡æ•°ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ç®¡ç†ãƒ»åˆ¶å¾¡

#### ğŸ“‹ ä¸»è¦æ©Ÿèƒ½

##### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºåˆ¶å¾¡
- **è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ**: å€‹åˆ¥ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º
- **ã‚«ãƒ©ãƒ¼ç®¡ç†**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åˆ¥ã®è‰²åˆ†ã‘è¡¨ç¤º
- **é¸æŠçŠ¶æ…‹**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ç®¡ç†

##### CRUDæ“ä½œ
- **æ–°è¦ä½œæˆ**: æ–°ã—ã„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è¿½åŠ 
- **ç·¨é›†**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åãƒ»è‰²ã®å¤‰æ›´  
- **å‰Šé™¤**: ä¸è¦ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®å‰Šé™¤
- **ä¸¦ã³æ›¿ãˆ**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ã®é †åºå¤‰æ›´

#### ğŸ”§ Propså®šç¾©

```typescript
interface CalendarListProps {
  // ãƒ‡ãƒ¼ã‚¿
  calendars: Calendar[]
  selectedCalendarIds: string[]
  
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  onCalendarToggle?: (calendarId: string, visible: boolean) => void
  onCalendarSelect?: (calendarId: string) => void
  onCalendarCreate?: () => void
  onCalendarEdit?: (calendarId: string) => void
  onCalendarDelete?: (calendarId: string) => void
  
  // è¡¨ç¤ºåˆ¶å¾¡
  allowReorder?: boolean
  showCreateButton?: boolean
  maxDisplayCount?: number
}

interface Calendar {
  id: string
  name: string
  color: string
  visible: boolean
  isDefault?: boolean
  eventCount?: number
}
```

#### ğŸ’¡ ä½¿ç”¨ä¾‹

```tsx
<CalendarList
  calendars={[
    {
      id: '1',
      name: 'å€‹äººã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼', 
      color: '#3B82F6',
      visible: true,
      isDefault: true,
      eventCount: 15
    },
    {
      id: '2',
      name: 'ä»•äº‹',
      color: '#EF4444', 
      visible: true,
      eventCount: 23
    }
  ]}
  selectedCalendarIds={['1', '2']}
  onCalendarToggle={(id, visible) => {
    updateCalendarVisibility(id, visible)
  }}
  onCalendarCreate={() => openCalendarCreationModal()}
  allowReorder={true}
/>
```

#### ğŸ¨ ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

```tsx
function CalendarListItem({ calendar, onToggle, onEdit }) {
  return (
    <div className="flex items-center gap-3 p-2 hover:bg-muted/50">
      {/* ã‚«ãƒ©ãƒ¼ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */}
      <div 
        className="w-3 h-3 rounded-full"
        style={{ backgroundColor: calendar.color }}
      />
      
      {/* è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ */}
      <Checkbox 
        checked={calendar.visible}
        onChange={(visible) => onToggle(calendar.id, visible)}
      />
      
      {/* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å */}
      <span className="flex-1 text-sm">
        {calendar.name}
      </span>
      
      {/* ã‚¤ãƒ™ãƒ³ãƒˆæ•° */}
      {calendar.eventCount > 0 && (
        <Badge variant="secondary" size="sm">
          {calendar.eventCount}
        </Badge>
      )}
      
      {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button variant="ghost" size="sm">
            <MoreHorizontal className="w-4 h-4" />
          </Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem onClick={() => onEdit(calendar.id)}>
            ç·¨é›†
          </DropdownMenuItem>
          <DropdownMenuItem 
            onClick={() => onDelete(calendar.id)}
            className="text-destructive"
          >
            å‰Šé™¤
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>
  )
}
```

---

### 5. ğŸ·ï¸ TagFilter

**ãƒ•ã‚¡ã‚¤ãƒ«**: `TagFilter.tsx`  
**å½¹å‰²**: ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

#### ğŸ“‹ ä¸»è¦æ©Ÿèƒ½

##### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åˆ¶å¾¡
- **ãƒãƒ«ãƒé¸æŠ**: è¤‡æ•°ã‚¿ã‚°ã§ã®AND/ORæ¤œç´¢
- **é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: ç‰¹å®šã‚¿ã‚°ã‚’é™¤å¤–ã™ã‚‹é€†ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹**: é©ç”¨ä¸­ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®è¦–è¦šçš„è¡¨ç¤º

##### ã‚¿ã‚°ç®¡ç†
- **æ–°è¦ä½œæˆ**: ãã®å ´ã§ã®ã‚¿ã‚°ä½œæˆ
- **ã‚«ãƒ©ãƒ¼è¨­å®š**: ã‚¿ã‚°ã®è‰²åˆ†ã‘ç®¡ç†
- **ä½¿ç”¨é »åº¦**: ã‚ˆãä½¿ç”¨ã™ã‚‹ã‚¿ã‚°ã®è‡ªå‹•çš„ãªä¸Šä½è¡¨ç¤º

#### ğŸ”§ Propså®šç¾©

```typescript
interface TagFilterProps {
  // ãƒ‡ãƒ¼ã‚¿
  tags: TagItem[]
  selectedTagIds: string[]
  
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  onTagToggle?: (tagId: string, selected: boolean) => void
  onTagCreate?: (name: string, color?: string) => void
  onClearAll?: () => void
  
  // è¡¨ç¤ºåˆ¶å¾¡
  showCounts?: boolean // ã‚¿ã‚°ä½¿ç”¨å›æ•°ã®è¡¨ç¤º
  maxVisibleTags?: number // åˆæœŸè¡¨ç¤ºã‚¿ã‚°æ•°
  allowCreate?: boolean // æ–°è¦ã‚¿ã‚°ä½œæˆã®è¨±å¯
}

interface TagItem {
  id: string
  name: string
  color: string
  count: number // ã“ã®ã‚¿ã‚°ã‚’æŒã¤ã‚¤ãƒ™ãƒ³ãƒˆæ•°
}
```

#### ğŸ’¡ ä½¿ç”¨ä¾‹

```tsx
<TagFilter
  tags={[
    { id: '1', name: 'é‡è¦', color: '#EF4444', count: 12 },
    { id: '2', name: 'ä¼šè­°', color: '#3B82F6', count: 8 },
    { id: '3', name: 'å€‹äºº', color: '#10B981', count: 15 }
  ]}
  selectedTagIds={['1']}
  onTagToggle={(tagId, selected) => {
    if (selected) {
      setSelectedTags([...selectedTags, tagId])
    } else {
      setSelectedTags(selectedTags.filter(id => id !== tagId))
    }
  }}
  onTagCreate={(name, color) => {
    createNewTag({ name, color })
  }}
  showCounts={true}
  maxVisibleTags={6}
/>
```

#### ğŸ¨ ã‚¿ã‚°ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

```tsx
function TagFilterItem({ tag, selected, onToggle }) {
  return (
    <button
      className={cn(
        "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-colors",
        selected 
          ? "bg-primary text-primary-foreground"
          : "bg-muted hover:bg-muted/80"
      )}
      onClick={() => onToggle(tag.id, !selected)}
    >
      {/* ã‚¿ã‚°ã‚«ãƒ©ãƒ¼ */}
      <div
        className="w-2 h-2 rounded-full"
        style={{ backgroundColor: tag.color }}
      />
      
      {/* ã‚¿ã‚°å */}
      <span>{tag.name}</span>
      
      {/* ä½¿ç”¨å›æ•° */}
      {tag.count > 0 && (
        <Badge variant="secondary" size="xs">
          {tag.count}
        </Badge>
      )}
    </button>
  )
}
```

---

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰

### ğŸ¨ ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### CSSå¤‰æ•°ã«ã‚ˆã‚‹çµ±ä¸€çš„ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

```css
:root {
  /* ã‚µã‚¤ãƒ‰ãƒãƒ¼åŸºæœ¬è¨­å®š */
  --sidebar-width-full: 320px;
  --sidebar-width-collapsed: 48px;
  --sidebar-padding: 16px;
  
  /* ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ */
  --sidebar-bg: hsl(var(--background));
  --sidebar-border: hsl(var(--border));
  --sidebar-text: hsl(var(--foreground));
  
  /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š */
  --section-spacing: 24px;
  --section-header-height: 32px;
}
```

#### ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

```css
[data-theme="dark"] {
  --sidebar-bg: hsl(220 13% 13%);
  --sidebar-border: hsl(220 13% 20%);
  --today-highlight: hsl(217 91% 60%);
}
```

### ğŸ”§ æ©Ÿèƒ½æ‹¡å¼µ

#### ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½åŠ 

```tsx
// 1. æ–°ã—ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
function CustomSection({ isExpanded, onToggle }) {
  return (
    <div className="space-y-2">
      <button 
        onClick={() => onToggle('custom-section')}
        className="flex items-center justify-between w-full"
      >
        <span className="text-sm font-medium">ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</span>
        {isExpanded ? <ChevronUp /> : <ChevronDown />}
      </button>
      
      {isExpanded && (
        <div className="space-y-2 p-2 bg-muted/50 rounded">
          {/* ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
        </div>
      )}
    </div>
  )
}

// 2. Sidebarã¸ã®çµ±åˆ
<Sidebar>
  {/* æ—¢å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
  <MiniCalendar {...miniCalendarProps} />
  <QuickActions {...quickActionProps} />
  
  {/* ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
  <CustomSection 
    isExpanded={expandedSections.has('custom-section')}
    onToggle={toggleSection}
  />
</Sidebar>
```

#### QuickActionsã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```tsx
interface CustomQuickActionsProps extends QuickActionsProps {
  onCustomAction?: () => void
}

function CustomQuickActions(props: CustomQuickActionsProps) {
  const baseActions = [
    {
      id: 'create-event',
      label: 'ã‚¤ãƒ™ãƒ³ãƒˆ',
      icon: Plus,
      onClick: props.onCreateEvent
    },
    {
      id: 'custom-action',
      label: 'ã‚«ã‚¹ã‚¿ãƒ ',
      icon: Star,
      onClick: props.onCustomAction
    }
  ]
  
  return (
    <div className="grid grid-cols-2 gap-2">
      {baseActions.map(action => (
        <Button
          key={action.id}
          variant="outline"
          size="sm"
          onClick={action.onClick}
        >
          <action.icon className="w-4 h-4 mr-2" />
          {action.label}
        </Button>
      ))}
    </div>
  )
}
```

---

## å®Ÿè£…ä¾‹

### ğŸš€ åŸºæœ¬å®Ÿè£…

```tsx
// CalendarSidebar.tsx - çµ±åˆã‚µã‚¤ãƒ‰ãƒãƒ¼
import { 
  Sidebar,
  MiniCalendar, 
  QuickActions,
  CalendarList,
  TagFilter
} from '@/features/calendar/components/layout/Sidebar'

export function CalendarSidebar() {
  const [collapsed, setCollapsed] = useState(false)
  const [selectedDate, setSelectedDate] = useState(new Date())
  const [selectedTags, setSelectedTags] = useState<string[]>([])
  
  return (
    <Sidebar
      collapsed={collapsed}
      onCollapsedChange={setCollapsed}
      selectedDate={selectedDate}
      onDateSelect={(date) => {
        setSelectedDate(date)
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ¡ã‚¤ãƒ³ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
        navigateToDate(date)
      }}
      tags={availableTags}
      selectedTagIds={selectedTags}
      onTagToggle={(tagId, selected) => {
        if (selected) {
          setSelectedTags([...selectedTags, tagId])
        } else {
          setSelectedTags(selectedTags.filter(id => id !== tagId))
        }
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
        applyTagFilter(selectedTags)
      }}
      onCreateEvent={() => openCreateModal('event')}
      onCreateTask={() => openCreateModal('task')}
      showMiniCalendar={true}
      showQuickActions={true}
      showTagFilter={true}
    />
  )
}
```

### ğŸ¯ é«˜åº¦ãªå®Ÿè£…

```tsx
// AdvancedCalendarSidebar.tsx - é«˜åº¦ãªæ©Ÿèƒ½çµ±åˆ
export function AdvancedCalendarSidebar() {
  // çŠ¶æ…‹ç®¡ç†
  const [sidebarState, setSidebarState] = useLocalStorage('sidebar-state', {
    collapsed: false,
    expandedSections: ['mini-calendar', 'quick-actions']
  })
  
  // ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ
  const { data: calendars } = useCalendars()
  const { data: tags } = useTags() 
  const { data: events } = useEvents()
  
  // è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  const eventDates = useMemo(() => 
    events.map(event => new Date(event.startDate)), 
    [events]
  )
  
  const tagCounts = useMemo(() =>
    tags.map(tag => ({
      ...tag,
      count: events.filter(event => 
        event.tags.includes(tag.id)
      ).length
    })),
    [tags, events]
  )
  
  return (
    <Sidebar
      collapsed={sidebarState.collapsed}
      onCollapsedChange={(collapsed) => 
        setSidebarState(prev => ({ ...prev, collapsed }))
      }
      
      // MiniCalendarè¨­å®š
      selectedDate={currentDate}
      onDateSelect={handleDateSelect}
      highlightedDates={eventDates}
      
      // CalendarListè¨­å®š  
      calendars={calendars}
      selectedCalendarIds={visibleCalendarIds}
      onCalendarToggle={handleCalendarToggle}
      onCalendarCreate={handleCalendarCreate}
      
      // TagFilterè¨­å®š
      tags={tagCounts}
      selectedTagIds={activeTagFilters}
      onTagToggle={handleTagFilter}
      onTagCreate={handleTagCreate}
      
      // QuickActionsè¨­å®š
      onCreateEvent={() => openModal('event', { date: currentDate })}
      onCreateTask={() => openModal('task', { date: currentDate })}
      onGoToToday={() => navigateToToday()}
      
      // è¡¨ç¤ºåˆ¶å¾¡
      showMiniCalendar={sidebarState.expandedSections.includes('mini-calendar')}
      showQuickActions={sidebarState.expandedSections.includes('quick-actions')}
      showCalendarList={calendars.length > 1}
      showTagFilter={tags.length > 0}
    />
  )
}
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ğŸ› ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒæŠ˜ã‚ŠãŸãŸã¾ã‚Œãªã„

**ç—‡çŠ¶**: æŠ˜ã‚ŠãŸãŸã¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚çŠ¶æ…‹ãŒå¤‰ã‚ã‚‰ãªã„

**åŸå› ã¨è§£æ±ºæ–¹æ³•**:
```tsx
// âŒ çŠ¶æ…‹ã®æ›´æ–°ãŒåæ˜ ã•ã‚Œã¦ã„ãªã„
const [collapsed, setCollapsed] = useState(false)
<Sidebar collapsed={collapsed} />

// âœ… ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’æ­£ã—ãè¨­å®š
<Sidebar 
  collapsed={collapsed}
  onCollapsedChange={setCollapsed} // â† ã“ã‚ŒãŒå¿…è¦
/>
```

#### 2. MiniCalendarã®æ—¥ä»˜é¸æŠãŒåŠ¹ã‹ãªã„

**ç—‡çŠ¶**: æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚é¸æŠçŠ¶æ…‹ãŒå¤‰ã‚ã‚‰ãªã„

**è§£æ±ºæ–¹æ³•**:
```tsx
// onDateSelectãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç¢ºå®Ÿã«å®Ÿè£…
<MiniCalendar
  selectedDate={currentDate}
  onDateSelect={(date) => {
    setCurrentDate(date) // çŠ¶æ…‹æ›´æ–°
    navigateToDate(date) // ãƒ“ãƒ¥ãƒ¼æ›´æ–°
  }}
/>
```

#### 3. TagFilterã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒé©ç”¨ã•ã‚Œãªã„

**ç—‡çŠ¶**: ã‚¿ã‚°ã‚’é¸æŠã—ã¦ã‚‚ã‚¤ãƒ™ãƒ³ãƒˆãŒãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œãªã„

**è§£æ±ºæ–¹æ³•**:
```tsx
// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã®é€£æºã‚’ç¢ºèª
const filteredEvents = useMemo(() => {
  if (selectedTagIds.length === 0) return events
  
  return events.filter(event =>
    selectedTagIds.some(tagId => 
      event.tags.includes(tagId)
    )
  )
}, [events, selectedTagIds])
```

#### 4. æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ãŒä¿å­˜ã•ã‚Œãªã„

**ç—‡çŠ¶**: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ãŒå¤±ã‚ã‚Œã‚‹

**è§£æ±ºæ–¹æ³•**:
```tsx
// localStorage ã§ã®æ°¸ç¶šåŒ–
const [collapsed, setCollapsed] = useLocalStorage('sidebar-collapsed', false)

// ã¾ãŸã¯ã€useCalendarLayoutãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨
const { sidebarOpen, toggleSidebar } = useCalendarLayout({
  persistSidebarState: true
})
```

#### 5. ãƒ¢ãƒã‚¤ãƒ«ã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã™ãã‚‹

**ç—‡çŠ¶**: ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¦†ã„éš ã™

**è§£æ±ºæ–¹æ³•**:
```css
/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®šã®ç¢ºèª */
@media (max-width: 768px) {
  .calendar-sidebar {
    position: absolute;
    z-index: 40;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .calendar-sidebar--open {
    transform: translateX(0);
  }
}
```

### ğŸ”§ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ãƒ¡ãƒ¢åŒ–ã®æ´»ç”¨

```tsx
// é«˜ã‚³ã‚¹ãƒˆãªè¨ˆç®—ã®ãƒ¡ãƒ¢åŒ–
const eventDateMap = useMemo(() => {
  const map = new Map()
  events.forEach(event => {
    const dateKey = format(event.startDate, 'yyyy-MM-dd')
    if (!map.has(dateKey)) {
      map.set(dateKey, [])
    }
    map.get(dateKey).push(event)
  })
  return map
}, [events])

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–
const MemoizedMiniCalendar = memo(MiniCalendar)
const MemoizedTagFilter = memo(TagFilter)
```

#### ä»®æƒ³åŒ–ã®å®Ÿè£…

```tsx
// å¤§é‡ã®ã‚¿ã‚°ãƒªã‚¹ãƒˆã®ä»®æƒ³åŒ–
import { FixedSizeList as List } from 'react-window'

function VirtualizedTagList({ tags, onTagToggle }) {
  return (
    <List
      height={200}
      itemCount={tags.length}
      itemSize={32}
    >
      {({ index, style }) => (
        <div style={style}>
          <TagFilterItem
            tag={tags[index]}
            onToggle={onTagToggle}
          />
        </div>
      )}
    </List>
  )
}
```

---

## ğŸ† ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. çŠ¶æ…‹ç®¡ç†
- **ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®è¡¨ç¤ºçŠ¶æ…‹
- **æ°¸ç¶šåŒ–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã¯ localStorage ã«ä¿å­˜
- **åŒæœŸ**: è¤‡æ•°ã‚¿ãƒ–é–“ã§ã®çŠ¶æ…‹åŒæœŸã‚’è€ƒæ…®

### 2. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ**: ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§æ“ä½œå¯èƒ½
- **ARIAå±æ€§**: é©åˆ‡ãª role, aria-label ã‚’è¨­å®š
- **è‰²ä¾å­˜ã®å›é¿**: è‰²ä»¥å¤–ã§ã‚‚æƒ…å ±ã‚’ä¼é”

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **é…å»¶èª­ã¿è¾¼ã¿**: é‡ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® lazy loading
- **ãƒ¡ãƒ¢åŒ–**: è¨ˆç®—ã‚³ã‚¹ãƒˆã®é«˜ã„å‡¦ç†ã®æœ€é©åŒ–
- **ä»®æƒ³åŒ–**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„ãªè¡¨ç¤º

### 4. ãƒ†ã‚¹ãƒˆ
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆ
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ã‚µã‚¤ãƒ‰ãƒãƒ¼å…¨ä½“ã®å”èª¿å‹•ä½œãƒ†ã‚¹ãƒˆ
- **E2E ãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ™ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ

---

## ğŸ”— é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

- [ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¬ã‚¤ãƒ‰](./layout-system.md)
- [useCalendarLayoutãƒ•ãƒƒã‚¯è©³ç´°](./api.md)
- [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå…¨ä½“ã‚¬ã‚¤ãƒ‰](./components.md)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](./development.md)

---

**æœ€çµ‚æ›´æ–°**: 2025-01-18  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0.0  
**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼**: BoxLog Development Team