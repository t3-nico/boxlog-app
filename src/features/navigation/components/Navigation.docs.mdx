import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Features/Navigation/Docs" />

# Navigation

アプリ全体のナビゲーション構造。3レイヤーアーキテクチャでページ切り替え・コンテキスト操作・メインコンテンツを分離する。

---

## 3レイヤーアーキテクチャ

```
┌─────────┬─────────────────┬─────────────────────────┐
│ AppBar  │    Sidebar      │     Main Content        │
│ (L1)    │    (L2)         │        (L3)             │
├─────────┼─────────────────┼─────────────────────────┤
│         │                 │                         │
│ [≡]     │ Calendar        │  [Calendar Grid View]   │
│         │ ├─ Filters      │                         │
│ [📅]←  │ ├─ Date Picker  │                         │
│ [📋]    │ └─ View Options │                         │
│ [📊]    │                 │                         │
│ [⚙️]    │                 │                         │
│         │                 │                         │
│ [👤]    │                 │                         │
└─────────┴─────────────────┴─────────────────────────┘
```

| レイヤー | 名称 | 役割 | 幅 |
|---------|------|------|-----|
| **L1** | AppBar | ページ選択（Calendar / Stats / Settings等） | 64px 固定 |
| **L2** | Sidebar | ページ内操作（フィルター、日付選択等） | 240px トグル |
| **L3** | Main Content | メインコンテンツ表示・操作 | 残り幅 |

---

## AppBar（L1: Primary Navigation）

**「どのページに行くか」の選択**

- トップレベルページ切り替え: Calendar / Stats / Settings
- 常に画面左端に固定表示
- グローバル機能: Sidebar開閉トグル、ユーザーメニュー

---

## Sidebar（L2: Contextual Navigation）

**「選んだページ内で何をするか」のコンテキスト**

- ページ固有コンテンツ: 現在のページに応じて内容が変わる
- トグル可能: AppBarのボタンで開閉
- リッチコンテンツ: フィルター、検索、日付選択など

### ページ別コンテンツ例

| ページ | Sidebarコンテンツ |
|-------|------------------|
| Calendar | 日付ピッカー、タグフィルター、ビューオプション |
| Settings | Account、Appearance、Notifications セクション |

---

## コンポーネント構成

```
src/features/navigation/
├── components/
│   ├── AppBar.tsx              L1 メインナビゲーション
│   ├── AppBarItem.tsx          ナビアイテム
│   └── sidebar/
│       └── CommonSidebar.tsx   L2 共通Sidebarラッパー
├── stores/
│   └── useNavigationStore.ts   開閉状態、アクティブページ
└── types.ts
```

---

## 状態管理

### useNavigationStore

```typescript
const {
  isSidebarOpen,    // Sidebar開閉状態
  toggleSidebar,    // トグル
} = useNavigationStore();
```

---

## デザイン仕様

| 項目 | 値 |
|------|-----|
| AppBar幅 | 64px 固定 |
| Sidebar幅 | 240px 固定 |
| Sidebar表示 | `isSidebarOpen` が `true` の時のみ |
| アニメーション | なし（即座に表示/非表示） |
| スタイリング | `bg-card text-card-foreground border-border` |

---

## 設計原則

| 原則 | 説明 |
|------|------|
| Context Awareness | 現在のページに応じたSidebarコンテンツ表示 |
| Flexibility | ページごとに異なるレイアウト・機能 |
| Collapsibility | 集中したい時はSidebarを非表示に |

---

## Sidebarでやらないこと

- ページ間移動 → AppBar（L1）の責務
- ユーザーメニュー → AppBar（L1）の責務
- テーマ切り替え → AppBar（L1）の責務

---

**最終更新**: 2026-02-17
