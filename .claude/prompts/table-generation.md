# ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

## æ¦‚è¦
BoxLog Appç”¨ã®é«˜æ©Ÿèƒ½ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‚TanStack Table + shadcn/ui + ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ å®Œå…¨çµ±åˆã€‚ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚«ãƒ©ãƒ è¡¨ç¤ºåˆ¶å¾¡å®Œå‚™ã€‚

## æ©Ÿèƒ½ä¸€è¦§

### ğŸ”§ åŸºæœ¬æ©Ÿèƒ½
- **ã‚½ãƒ¼ãƒˆ**: å…¨ã‚«ãƒ©ãƒ å¯¾å¿œã®æ˜‡é †ãƒ»é™é †ã‚½ãƒ¼ãƒˆ
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: ãƒ†ã‚­ã‚¹ãƒˆãƒ»ã‚»ãƒ¬ã‚¯ãƒˆãƒ»æ—¥ä»˜ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**: ã‚µã‚¤ã‚ºå¯å¤‰ãƒ»ãƒšãƒ¼ã‚¸ã‚¸ãƒ£ãƒ³ãƒ—å¯¾å¿œ
- **ã‚«ãƒ©ãƒ åˆ¶å¾¡**: è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒ»å¹…èª¿æ•´

### ğŸ¨ UI/UXæ©Ÿèƒ½
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ARIAå±æ€§ãƒ»ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ»ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤º
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ãƒ»ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½

### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ©Ÿèƒ½
- **ä»®æƒ³åŒ–**: å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
- **ãƒ¡ãƒ¢åŒ–**: ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢
- **æ¥½è¦³çš„æ›´æ–°**: UIåå¿œæ€§å‘ä¸Š

## å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `{TableName}`: ãƒ†ãƒ¼ãƒ–ãƒ«åï¼ˆPascalCaseã€ä¾‹: UserTable, TaskTableï¼‰
- `{tableName}`: ãƒ†ãƒ¼ãƒ–ãƒ«åï¼ˆcamelCaseã€ä¾‹: userTable, taskTableï¼‰
- `{EntityName}`: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åï¼ˆPascalCaseã€ä¾‹: User, Taskï¼‰
- `{entity}`: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åï¼ˆkebab-caseã€ä¾‹: user, taskï¼‰

### ã‚«ãƒ©ãƒ å®šç¾©ï¼ˆJSONå½¢å¼ï¼‰
```json
{
  "columns": [
    {
      "key": "id",
      "label": "ID",
      "type": "text",
      "width": 80,
      "sortable": true,
      "filterable": false,
      "visible": true
    },
    {
      "key": "title",
      "label": "ã‚¿ã‚¤ãƒˆãƒ«",
      "type": "text",
      "width": 200,
      "sortable": true,
      "filterable": true,
      "visible": true
    },
    {
      "key": "status",
      "label": "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
      "type": "select",
      "width": 120,
      "sortable": true,
      "filterable": true,
      "visible": true,
      "options": [
        { "value": "active", "label": "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", "color": "green" },
        { "value": "inactive", "label": "éã‚¢ã‚¯ãƒ†ã‚£ãƒ–", "color": "gray" }
      ]
    },
    {
      "key": "createdAt",
      "label": "ä½œæˆæ—¥æ™‚",
      "type": "date",
      "width": 160,
      "sortable": true,
      "filterable": true,
      "visible": true
    }
  ]
}
```

## ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹é€ 

### 1. ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”Ÿæˆ

```typescript
// src/components/tables/{TableName}.tsx
'use client'

import React from 'react'
import {
  ColumnDef,
  ColumnFiltersState,
  SortingState,
  VisibilityState,
  flexRender,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  useReactTable,
} from '@tanstack/react-table'
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table'
import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Badge } from '@/components/ui/badge'
import { Skeleton } from '@/components/ui/skeleton'
import { Alert, AlertDescription } from '@/components/ui/alert'
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select'
import {
  ChevronDown,
  Search,
  Filter,
  Download,
  RefreshCcw,
  Settings,
  ChevronLeft,
  ChevronRight,
  ChevronsLeft,
  ChevronsRight,
  ArrowUpDown,
  ArrowUp,
  ArrowDown,
} from 'lucide-react'

import { {EntityName} } from '@/types/{entity}'
import { colors, spacing, typography } from '@/config/theme'
import { LoadingSpinner } from '@/components/common/LoadingSpinner'
import { ErrorBoundary } from '@/components/error/ErrorBoundary'

interface {TableName}Props {
  data: {EntityName}[]
  loading?: boolean
  error?: string | null
  onRefresh?: () => void
  onRowClick?: (row: {EntityName}) => void
  onEdit?: (row: {EntityName}) => void
  onDelete?: (row: {EntityName}) => void
  showActions?: boolean
  exportable?: boolean
}

export function {TableName}({
  data,
  loading = false,
  error = null,
  onRefresh,
  onRowClick,
  onEdit,
  onDelete,
  showActions = true,
  exportable = false,
}: {TableName}Props) {
  const [sorting, setSorting] = React.useState<SortingState>([])
  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([])
  const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({})
  const [globalFilter, setGlobalFilter] = React.useState('')

  // ã‚«ãƒ©ãƒ å®šç¾©
  const columns: ColumnDef<{EntityName}>[] = React.useMemo(
    () => [
      {
        accessorKey: 'id',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
            className="h-auto p-0 font-semibold"
          >
            ID
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className={`${typography.body.sm} font-mono`}>
            {row.getValue('id').toString().slice(0, 8)}...
          </div>
        ),
        size: 80,
      },
      {
        accessorKey: 'title',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
            className="h-auto p-0 font-semibold"
          >
            ã‚¿ã‚¤ãƒˆãƒ«
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className={`${typography.body.base} max-w-[200px] truncate`}>
            {row.getValue('title')}
          </div>
        ),
        size: 200,
      },
      {
        accessorKey: 'status',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
            className="h-auto p-0 font-semibold"
          >
            ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => {
          const status = row.getValue('status') as string
          const statusConfig = {
            active: { label: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–', variant: 'default' as const, color: 'bg-green-100 text-green-800' },
            inactive: { label: 'éã‚¢ã‚¯ãƒ†ã‚£ãƒ–', variant: 'secondary' as const, color: 'bg-gray-100 text-gray-800' },
            pending: { label: 'ä¿ç•™ä¸­', variant: 'outline' as const, color: 'bg-yellow-100 text-yellow-800' },
          }
          const config = statusConfig[status] || statusConfig.inactive

          return (
            <Badge variant={config.variant} className={config.color}>
              {config.label}
            </Badge>
          )
        },
        filterFn: (row, id, value) => {
          return value.includes(row.getValue(id))
        },
        size: 120,
      },
      {
        accessorKey: 'createdAt',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
            className="h-auto p-0 font-semibold"
          >
            ä½œæˆæ—¥æ™‚
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className={typography.body.sm}>
            {new Date(row.getValue('createdAt')).toLocaleDateString('ja-JP', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit',
            })}
          </div>
        ),
        size: 160,
      },
      {
        accessorKey: 'updatedAt',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
            className="h-auto p-0 font-semibold"
          >
            æ›´æ–°æ—¥æ™‚
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className={typography.body.sm}>
            {new Date(row.getValue('updatedAt')).toLocaleDateString('ja-JP', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
            })}
          </div>
        ),
        size: 140,
      },
      ...(showActions
        ? [
            {
              id: 'actions',
              header: 'æ“ä½œ',
              cell: ({ row }) => (
                <div className="flex items-center gap-2">
                  {onEdit && (
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={(e) => {
                        e.stopPropagation()
                        onEdit(row.original)
                      }}
                    >
                      ç·¨é›†
                    </Button>
                  )}
                  {onDelete && (
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={(e) => {
                        e.stopPropagation()
                        onDelete(row.original)
                      }}
                    >
                      å‰Šé™¤
                    </Button>
                  )}
                </div>
              ),
              size: 120,
            },
          ]
        : []),
    ],
    [showActions, onEdit, onDelete]
  )

  const table = useReactTable({
    data,
    columns,
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    getCoreRowModel: getCoreRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    onColumnVisibilityChange: setColumnVisibility,
    onGlobalFilterChange: setGlobalFilter,
    state: {
      sorting,
      columnFilters,
      columnVisibility,
      globalFilter,
    },
    initialState: {
      pagination: {
        pageSize: 10,
      },
    },
  })

  // CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
  const exportToCSV = () => {
    const visibleColumns = table.getVisibleFlatColumns()
    const rows = table.getFilteredRowModel().rows

    const headers = visibleColumns
      .filter(column => column.id !== 'actions')
      .map(column => column.columnDef.header)
      .join(',')

    const csvRows = rows.map(row =>
      visibleColumns
        .filter(column => column.id !== 'actions')
        .map(column => {
          const cellValue = row.getValue(column.id)
          return typeof cellValue === 'string' ? `"${cellValue}"` : cellValue
        })
        .join(',')
    )

    const csvContent = [headers, ...csvRows].join('\n')
    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })
    const link = document.createElement('a')
    const url = URL.createObjectURL(blob)
    link.setAttribute('href', url)
    link.setAttribute('download', `{entity}-data-${new Date().toISOString().slice(0, 10)}.csv`)
    link.style.visibility = 'hidden'
    document.body.appendChild(link)
    link.click()
    document.body.removeChild(link)
  }

  if (error) {
    return (
      <Alert variant="destructive">
        <AlertDescription className="flex items-center justify-between">
          <span>ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: {error}</span>
          {onRefresh && (
            <Button variant="outline" size="sm" onClick={onRefresh}>
              <RefreshCcw className="w-4 h-4 mr-2" />
              å†è©¦è¡Œ
            </Button>
          )}
        </AlertDescription>
      </Alert>
    )
  }

  return (
    <ErrorBoundary>
      <div className={`w-full space-y-4 ${spacing.component.section.md}`}>
        {/* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ */}
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-2">
            {/* ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢ */}
            <div className="relative">
              <Search className="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
              <Input
                placeholder="æ¤œç´¢..."
                value={globalFilter ?? ''}
                onChange={(event) => setGlobalFilter(String(event.target.value))}
                className="pl-8 max-w-sm"
              />
            </div>

            {/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}
            <Select
              value={(table.getColumn('status')?.getFilterValue() as string[])?.join(',') || ''}
              onValueChange={(value) =>
                table.getColumn('status')?.setFilterValue(value ? value.split(',') : [])
              }
            >
              <SelectTrigger className="w-[180px]">
                <SelectValue placeholder="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹çµã‚Šè¾¼ã¿" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="">ã™ã¹ã¦</SelectItem>
                <SelectItem value="active">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–</SelectItem>
                <SelectItem value="inactive">éã‚¢ã‚¯ãƒ†ã‚£ãƒ–</SelectItem>
                <SelectItem value="pending">ä¿ç•™ä¸­</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="flex items-center space-x-2">
            {/* ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒœã‚¿ãƒ³ */}
            {onRefresh && (
              <Button
                variant="outline"
                size="sm"
                onClick={onRefresh}
                disabled={loading}
              >
                {loading ? (
                  <LoadingSpinner className="w-4 h-4" />
                ) : (
                  <RefreshCcw className="w-4 h-4" />
                )}
              </Button>
            )}

            {/* ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ */}
            {exportable && (
              <Button variant="outline" size="sm" onClick={exportToCSV}>
                <Download className="w-4 h-4 mr-2" />
                CSV
              </Button>
            )}

            {/* ã‚«ãƒ©ãƒ è¡¨ç¤ºè¨­å®š */}
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="outline" size="sm">
                  <Settings className="w-4 h-4 mr-2" />
                  è¡¨ç¤º
                  <ChevronDown className="w-4 h-4 ml-2" />
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                {table
                  .getAllColumns()
                  .filter((column) => column.getCanHide())
                  .map((column) => {
                    return (
                      <DropdownMenuCheckboxItem
                        key={column.id}
                        className="capitalize"
                        checked={column.getIsVisible()}
                        onCheckedChange={(value) => column.toggleVisibility(!!value)}
                      >
                        {column.id}
                      </DropdownMenuCheckboxItem>
                    )
                  })}
              </DropdownMenuContent>
            </DropdownMenu>
          </div>
        </div>

        {/* ãƒ†ãƒ¼ãƒ–ãƒ« */}
        <div className={`rounded-md border ${colors.border.default}`}>
          <Table>
            <TableHeader>
              {table.getHeaderGroups().map((headerGroup) => (
                <TableRow key={headerGroup.id}>
                  {headerGroup.headers.map((header) => (
                    <TableHead
                      key={header.id}
                      className={colors.background.muted}
                      style={{ width: header.getSize() }}
                    >
                      {header.isPlaceholder
                        ? null
                        : flexRender(header.column.columnDef.header, header.getContext())}
                    </TableHead>
                  ))}
                </TableRow>
              ))}
            </TableHeader>
            <TableBody>
              {loading ? (
                // ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
                Array.from({ length: 5 }).map((_, index) => (
                  <TableRow key={index}>
                    {columns.map((_, cellIndex) => (
                      <TableCell key={cellIndex}>
                        <Skeleton className="h-4 w-full" />
                      </TableCell>
                    ))}
                  </TableRow>
                ))
              ) : table.getRowModel().rows?.length ? (
                table.getRowModel().rows.map((row) => (
                  <TableRow
                    key={row.id}
                    data-state={row.getIsSelected() && 'selected'}
                    className={onRowClick ? 'cursor-pointer hover:bg-muted/50' : ''}
                    onClick={() => onRowClick?.(row.original)}
                  >
                    {row.getVisibleCells().map((cell) => (
                      <TableCell key={cell.id}>
                        {flexRender(cell.column.columnDef.cell, cell.getContext())}
                      </TableCell>
                    ))}
                  </TableRow>
                ))
              ) : (
                <TableRow>
                  <TableCell colSpan={columns.length} className="h-24 text-center">
                    <div className="flex flex-col items-center space-y-2">
                      <div className={typography.body.base}>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>
                      {globalFilter && (
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setGlobalFilter('')}
                        >
                          æ¤œç´¢æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢
                        </Button>
                      )}
                    </div>
                  </TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
        </div>

        {/* ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ */}
        <div className="flex items-center justify-between px-2">
          <div className={`flex items-center space-x-6 lg:space-x-8 ${typography.body.sm}`}>
            <div className="flex items-center space-x-2">
              <p className="text-sm font-medium">è¡¨ç¤ºä»¶æ•°</p>
              <Select
                value={`${table.getState().pagination.pageSize}`}
                onValueChange={(value) => {
                  table.setPageSize(Number(value))
                }}
              >
                <SelectTrigger className="h-8 w-[70px]">
                  <SelectValue placeholder={table.getState().pagination.pageSize} />
                </SelectTrigger>
                <SelectContent side="top">
                  {[10, 20, 30, 40, 50].map((pageSize) => (
                    <SelectItem key={pageSize} value={`${pageSize}`}>
                      {pageSize}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
            <div className="flex w-[100px] items-center justify-center text-sm font-medium">
              {table.getPageCount() > 0
                ? `${table.getState().pagination.pageIndex + 1} / ${table.getPageCount()}`
                : '0 / 0'
              }
            </div>
            <div className="text-sm text-muted-foreground">
              {table.getFilteredRowModel().rows.length} ä»¶ä¸­{' '}
              {table.getRowModel().rows.length} ä»¶ã‚’è¡¨ç¤º
            </div>
          </div>
          <div className="flex items-center space-x-2">
            <Button
              variant="outline"
              className="hidden h-8 w-8 p-0 lg:flex"
              onClick={() => table.setPageIndex(0)}
              disabled={!table.getCanPreviousPage()}
            >
              <ChevronsLeft className="h-4 w-4" />
            </Button>
            <Button
              variant="outline"
              className="h-8 w-8 p-0"
              onClick={() => table.previousPage()}
              disabled={!table.getCanPreviousPage()}
            >
              <ChevronLeft className="h-4 w-4" />
            </Button>
            <Button
              variant="outline"
              className="h-8 w-8 p-0"
              onClick={() => table.nextPage()}
              disabled={!table.getCanNextPage()}
            >
              <ChevronRight className="h-4 w-4" />
            </Button>
            <Button
              variant="outline"
              className="hidden h-8 w-8 p-0 lg:flex"
              onClick={() => table.setPageIndex(table.getPageCount() - 1)}
              disabled={!table.getCanNextPage()}
            >
              <ChevronsRight className="h-4 w-4" />
            </Button>
          </div>
        </div>
      </div>
    </ErrorBoundary>
  )
}
```

### 2. ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ•ãƒƒã‚¯ç”Ÿæˆ

```typescript
// src/hooks/use-{entity}-table.ts
import { useState, useMemo } from 'react'
import useSWR from 'swr'
import { {EntityName} } from '@/types/{entity}'
import { createAppError, ERROR_CODES } from '@/config/error-patterns'
import { fetcher } from '@/lib/api'

export interface Use{TableName}Return {
  data: {EntityName}[]
  loading: boolean
  error: string | null
  refresh: () => void
  total: number
  // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  filteredData: {EntityName}[]
  setSearchTerm: (term: string) => void
  setStatusFilter: (status: string[]) => void
  setDateRangeFilter: (startDate: Date | null, endDate: Date | null) => void
}

export function use{TableName}(): Use{TableName}Return {
  const [searchTerm, setSearchTerm] = useState('')
  const [statusFilter, setStatusFilter] = useState<string[]>([])
  const [dateRangeFilter, setDateRangeFilter] = useState<{
    startDate: Date | null
    endDate: Date | null
  }>({ startDate: null, endDate: null })

  const {
    data: rawData,
    error,
    isLoading: loading,
    mutate: refresh
  } = useSWR<{EntityName}[]>('/{entity}', fetcher, {
    revalidateOnFocus: false,
    revalidateOnReconnect: true,
    dedupingInterval: 5000,
  })

  const data = rawData || []

  // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
  const filteredData = useMemo(() => {
    let filtered = [...data]

    // ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢
    if (searchTerm) {
      const term = searchTerm.toLowerCase()
      filtered = filtered.filter(item =>
        Object.values(item).some(value =>
          String(value).toLowerCase().includes(term)
        )
      )
    }

    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (statusFilter.length > 0) {
      filtered = filtered.filter(item =>
        statusFilter.includes(item.status)
      )
    }

    // æ—¥ä»˜ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (dateRangeFilter.startDate || dateRangeFilter.endDate) {
      filtered = filtered.filter(item => {
        const itemDate = new Date(item.createdAt)

        if (dateRangeFilter.startDate && itemDate < dateRangeFilter.startDate) {
          return false
        }

        if (dateRangeFilter.endDate && itemDate > dateRangeFilter.endDate) {
          return false
        }

        return true
      })
    }

    return filtered
  }, [data, searchTerm, statusFilter, dateRangeFilter])

  const errorMessage = error?.message || null

  return {
    data,
    loading,
    error: errorMessage,
    refresh,
    total: data.length,
    filteredData,
    setSearchTerm,
    setStatusFilter,
    setDateRangeFilter,
  }
}
```

### 3. ä½¿ç”¨ä¾‹ãƒšãƒ¼ã‚¸ç”Ÿæˆ

```typescript
// src/app/{entity}/page.tsx
'use client'

import React from 'react'
import { useRouter } from 'next/navigation'
import { {TableName} } from '@/components/tables/{TableName}'
import { use{TableName} } from '@/hooks/use-{entity}-table'
import { use{EntityName} } from '@/hooks/use-{entity}'
import { Button } from '@/components/ui/button'
import { Plus } from 'lucide-react'
import { toast } from '@/components/ui/use-toast'

export default function {EntityName}ListPage() {
  const router = useRouter()
  const {
    data,
    loading,
    error,
    refresh
  } = use{TableName}()

  const { remove } = use{EntityName}()

  const handleRowClick = (row: {EntityName}) => {
    router.push(`/{entity}/${row.id}`)
  }

  const handleEdit = (row: {EntityName}) => {
    router.push(`/{entity}/${row.id}/edit`)
  }

  const handleDelete = async (row: {EntityName}) => {
    if (!confirm(`"${row.title || row.id}"ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
      return
    }

    try {
      await remove(row.id)
      toast({
        title: 'å‰Šé™¤å®Œäº†',
        description: '{EntityName}ã‚’å‰Šé™¤ã—ã¾ã—ãŸ',
      })
      refresh()
    } catch (error) {
      toast({
        title: 'å‰Šé™¤ã‚¨ãƒ©ãƒ¼',
        description: error instanceof Error ? error.message : 'å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ',
        variant: 'destructive',
      })
    }
  }

  const handleCreate = () => {
    router.push('/{entity}/create')
  }

  return (
    <div className="container mx-auto py-8 space-y-6">
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold tracking-tight">{EntityName}ç®¡ç†</h1>
          <p className="text-muted-foreground">
            {EntityName}ã®ä¸€è¦§ãƒ»æ¤œç´¢ãƒ»ç®¡ç†ã‚’è¡Œãˆã¾ã™
          </p>
        </div>
        <Button onClick={handleCreate}>
          <Plus className="w-4 h-4 mr-2" />
          æ–°è¦ä½œæˆ
        </Button>
      </div>

      {/* ãƒ†ãƒ¼ãƒ–ãƒ« */}
      <{TableName}
        data={data}
        loading={loading}
        error={error}
        onRefresh={refresh}
        onRowClick={handleRowClick}
        onEdit={handleEdit}
        onDelete={handleDelete}
        exportable={true}
      />
    </div>
  )
}
```

## å¿…é ˆè¦ä»¶ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- [x] å…¨ã‚«ãƒ©ãƒ å¯¾å¿œ
- [x] æ˜‡é †ãƒ»é™é †åˆ‡ã‚Šæ›¿ãˆ
- [x] è¤‡æ•°ã‚«ãƒ©ãƒ ã‚½ãƒ¼ãƒˆå¯¾å¿œ
- [x] ã‚½ãƒ¼ãƒˆçŠ¶æ…‹ã®è¦–è¦šçš„è¡¨ç¤º

### âœ… ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- [x] ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢
- [x] ã‚«ãƒ©ãƒ åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- [x] ã‚»ãƒ¬ã‚¯ãƒˆå‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- [x] æ—¥ä»˜ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

### âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- [x] ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚ºå¤‰æ›´
- [x] ãƒšãƒ¼ã‚¸ã‚¸ãƒ£ãƒ³ãƒ—
- [x] ä»¶æ•°è¡¨ç¤º
- [x] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³

### âœ… UI/UXæ©Ÿèƒ½
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- [x] ã‚«ãƒ©ãƒ è¡¨ç¤ºåˆ¶å¾¡
- [x] CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- [x] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- [x] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### âœ… ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- [x] ARIAå±æ€§è¨­å®š
- [x] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ
- [x] é©åˆ‡ãªãƒ©ãƒ™ãƒ«è¨­å®š

### âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [x] ãƒ¡ãƒ¢åŒ–ã«ã‚ˆã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
- [x] ä»®æƒ³åŒ–å¯¾å¿œæº–å‚™
- [x] æ¥½è¦³çš„æ›´æ–°ã‚µãƒãƒ¼ãƒˆ

## ä½¿ç”¨ä¾‹

```typescript
// åŸºæœ¬çš„ãªä½¿ç”¨
<{TableName}
  data={users}
  loading={loading}
  onRowClick={(user) => router.push(`/users/${user.id}`)}
/>

// ãƒ•ãƒ«æ©Ÿèƒ½ç‰ˆ
<{TableName}
  data={users}
  loading={loading}
  error={error}
  onRefresh={refresh}
  onRowClick={handleRowClick}
  onEdit={handleEdit}
  onDelete={handleDelete}
  showActions={true}
  exportable={true}
/>
```