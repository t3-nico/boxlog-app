# AI行動規範

## 拡張思考（Extended Thinking）

| キーワード     | 思考予算       | 使用ケース                             |
| -------------- | -------------- | -------------------------------------- |
| `think`        | 低（5-10秒）   | 既存パターンの確認、簡単なバグ原因特定 |
| `think hard`   | 中（30-60秒）  | 複雑なロジック設計、複数選択肢の比較   |
| `think harder` | 高（2-3分）    | アーキテクチャ変更、複数機能の統合設計 |
| `ultrathink`   | 最大（5-10分） | CLAUDE.md変更、プロジェクト全体の方針  |

## 曖昧な指示への対応

推測で実装せず、確認を求める。確信度99%未満 → 必ず確認。

テンプレート:

```
【確認事項】 [質問]
【現時点の理解】 [理解]
【選択肢】 A案: ... / B案: ...
```

## ルール競合時の優先順位

1. CLAUDE.md + `.claude/rules/` のルール（最優先）
2. ユーザーの指示（ルールと矛盾する場合は透過的に確認）
3. ユーザーが同意した例外 → 理由をコミットメッセージに記録

## 開発者への説明スタイル

開発者は学びながら開発している:

- 「何をするか」と「**なぜそうするか**」をセットで説明
- GAFAのベストプラクティスに基づいた判断を明示
- ツール間の関係性（Next.js, Supabase, tRPC, Zustand）を意識
- 技術的負債を見つけたら積極的に解消を提案

## 意思決定の優先順位（GAFA-First）

1. GAFA製/推奨のものがあるか → あれば使う
2. 既存スタックで解決できるか → shadcn/ui, Zustand, tRPC
3. どれもなければ → 最もシンプルな方法

### 参照順

1. 公式ドキュメント（Next.js, React, TypeScript, Tailwind CSS）
2. プロジェクトルール（CLAUDE.md, `.claude/rules/`, `.claude/skills/`）
3. 既存実装パターン（同一ディレクトリ内のコード）

## ドキュメント提案

機能実装の完了後、`.claude/skills/docs-writing/SUGGEST.md` を参照してドキュメント更新を提案する。

## 学習パターン

`.claude/sessions/learned/` に蓄積されたプロジェクト固有の解決パターンを活用する。

- エラーに遭遇 → まず `ls .claude/sessions/learned/` で関連パターンを確認
- 新しいパターンを発見 → `/learn-pattern` で保存
- 自動チェック: `zustand-*.md`, `trpc-*.md`, `calendar-*.md`, `typescript-*.md`
